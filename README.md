Microscopy image segmentation for area measurement
==================================================

Tool to measure area in microscopy sampels. E.g. measure background and
cell. Can be trained to recognize multiple different area types. Uses a
method akin to gaussian mixture models. This is a quick hack for now.

Required tools
--------------

Python, numpy, scipy, scikit image and others.

Windows and MacOSX users can install Anaconda to get all required
dependencies: http://www.anaconda.com/

Authors
-------

David R. Piegdon <dgit@piegdon.de>


License
-------

All files in this repository are released unter the
GNU General Public License Version 3 or later.

Howto
-----

(Simplistic howto)

* put this python script into a directory, e.g. `documents/`

* copy all images to be processed into a directory inside this dir, e.g. `documents/images_to_be_done/`

* open a shell and go to the `documents/` directory

* run `python ./segmentation.py preprocess images_to_be_done`

* for all models that you want to separate, create a subdirectory in `documents/images_to_be_done/` named `model_xyz`, where the prefix MUST be `model_` and the suffix is named by you. e.g. two models `model_background` and `model_cells`.

* pick a few pictures from the PREPROCESSED images (in `documents/images_to_be_done/*.png`) and mask out background sections and save them as PNG to `documents/images_to_be_done/model_background`. same for foreground, or any other models that you wanted to define.

* again in the shell in the directory `documents/`, run `python ./segmentation.py train images_to_be_done`. this will learn from the models that you defined.

* when the learning is finished, in the same shell, run `python ./segmentation.py apply images_to_be_done`

* you are done. get a beer.


in the end, the directory should look like:

```
documents/
documents/segmentation.py					<< script to run
documents/images_to_be_done/
documents/images_to_be_done/originalimage1.tif			<< original image files
documents/images_to_be_done/originalimage2.tif
documents/images_to_be_done/originalimage3.tif
documents/images_to_be_done/originalimage1_preprocessed.png	<< preprocessed images generated by preprocess command
documents/images_to_be_done/originalimage2_preprocessed.png
documents/images_to_be_done/originalimage3_preprocessed.png
documents/images_to_be_done/model_front/sample1.png		<< samples that you cut out from preproc. images to define models
documents/images_to_be_done/model_front/sample2.png
documents/images_to_be_done/model_front/sample3.png
documents/images_to_be_done/model_back/sample1.png		<< other model group
documents/images_to_be_done/model_back/sample2.png
documents/images_to_be_done/model_back/sample3.png
documents/images_to_be_done/originalimage1_analysis.png		<< analysis files for review, as generated by apply command
documents/images_to_be_done/originalimage2_analysis.png
documents/images_to_be_done/originalimage3_analysis.png
documents/images_to_be_done/model_front.gmmpickle
documents/images_to_be_done/model_back.gmmpickle		<< raw data of how model works. ignore this
documents/images_to_be_done/analysis-summary.csv		<< final CSV analysis of are per model per image
```

